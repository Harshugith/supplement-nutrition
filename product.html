<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product Details</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="navbar solid">
  <div class="logo">Supplement Nutrition</div>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="products.html">Products</a></li>
    <li>
      <a href="cart.html">Cart ðŸ›’ 
        <span id="cartCount" style="
          background:red;
          padding:2px 8px;
          border-radius:50%;
          font-size:12px;">0</span>
      </a>
    </li>
  </ul>
</nav>

<section class="products-page" style="text-align:center;margin-top:120px">

  <img id="productImg" style="max-width:280px;border-radius:16px;">
  <h2 id="productTitle"></h2>
  <p id="productDesc"></p>
  <h3 id="productPrice"></h3>

  <button onclick="addToCart()">Add to Cart</button>
  <br><br>
  <button onclick="buyNow()" style="background:#25D366;color:#fff;">Buy Now (WhatsApp)</button>

</section>

<script>
const products = {
  "whey-protein": {title:"Whey Protein",price:2499,desc:"High quality whey protein",img:"images/mb.jpg"},
  "creatine": {title:"Creatine",price:899,desc:"Strength booster",img:"images/creatine2.png"},
  "mass-gainer": {title:"Mass Gainer",price:1999,desc:"Weight & muscle gain",img:"images/mass.png"}
};

const whatsappNumber = "919336174510";
const params = new URLSearchParams(window.location.search);
const pid = params.get("product");

let current;

if(products[pid]){
  current = {id:pid,qty:1,...products[pid]};
  productImg.src = current.img;
  productTitle.innerText = current.title;
  productDesc.innerText = current.desc;
  productPrice.innerText = "â‚¹"+current.price;
}

function addToCart(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let found = cart.find(i=>i.id===current.id);
  if(found){ found.qty++; }
  else{ cart.push(current); }
  localStorage.setItem("cart",JSON.stringify(cart));
  updateCount();
  alert("Added to cart âœ…");
}

function buyNow(){
  let msg = `ðŸ›’ *Buy Now Order*%0A%0A${current.title}%0AQty: 1%0APrice: â‚¹${current.price}`;
  window.open(`https://wa.me/${whatsappNumber}?text=${msg}`,"_blank");
}

function updateCount(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cartCount.innerText = cart.reduce((a,b)=>a+b.qty,0);
}
updateCount();
</script>

</body>
</html>
